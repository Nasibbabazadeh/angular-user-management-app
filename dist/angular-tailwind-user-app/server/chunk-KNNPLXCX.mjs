import './polyfills.server.mjs';
import{a as J,b as K,c as Q}from"./chunk-G627YMSH.mjs";import{a as N,b as h,c as V,d as O,e as A,f as j,g as B,h as G,i as q,j as $,k as R}from"./chunk-G44MNRR7.mjs";import{a as X}from"./chunk-YWERPAIF.mjs";import{a as W}from"./chunk-N73NIJCE.mjs";import{a as z,c as H}from"./chunk-KB3MMIXW.mjs";import"./chunk-J4BDXTMW.mjs";import{$ as w,A as S,L as a,M as u,Oa as T,Qa as v,V as M,X as p,aa as E,ba as o,ca as n,da as y,ga as U,ia as d,ja as c,ka as k,lb as L,ma as s,na as F,oa as b,p as m,ra as f,sa as D,ta as I,ua as P,v as g,w as _}from"./chunk-SOET56QL.mjs";import"./chunk-VVCT4QZE.mjs";var Z=(()=>{class r{constructor(e){this._fb=e,this.mode="add",this.userData=null,this.formSubmit=new S,this.closeModal=new S}ngOnInit(){this.userForm=this._fb.group({name:[this.userData?this.userData.name:"",h.required],surname:[this.userData?this.userData.surname:"",h.required],email:[this.userData?this.userData.email:"",[h.required,h.email]],profession:[this.userData?this.userData.profession:"",h.required]})}onSubmit(){this.userForm.valid&&this.formSubmit.emit(this.userForm.value)}onClose(){this.closeModal.emit()}static{this.\u0275fac=function(t){return new(t||r)(u(q))}}static{this.\u0275cmp=m({type:r,selectors:[["app-user-modal"]],inputs:{mode:"mode",userData:"userData"},outputs:{formSubmit:"formSubmit",closeModal:"closeModal"},standalone:!0,features:[f],decls:14,vars:3,consts:[[1,"absolute","inset-0","z-10","bg-black","bg-opacity-50","flex","items-center","justify-center"],[1,"bg-white","rounded-lg","p-6","max-w-lg","w-full"],[1,"text-lg","font-medium","mb-4"],[3,"ngSubmit","formGroup"],["type","text","formControlName","name","placeholder","Enter user name...",1,"mb-4","p-2","border","border-gray-300","rounded-md","w-full"],["type","text","formControlName","surname","placeholder","Enter user surname...",1,"mb-4","p-2","border","border-gray-300","rounded-md","w-full"],["type","text","formControlName","email","placeholder","Enter user email...",1,"mb-4","p-2","border","border-gray-300","rounded-md","w-full"],["type","text","formControlName","profession","placeholder","Enter user profession...",1,"mb-4","p-2","border","border-gray-300","rounded-md","w-full"],[1,"flex","justify-end","space-x-2"],["type","button",1,"px-4","py-2","bg-gray-500","text-white","rounded-lg",3,"click"],["type","submit",1,"px-4","py-2","bg-blue-600","text-white","rounded-lg",3,"disabled"]],template:function(t,i){t&1&&(o(0,"div",0)(1,"div",1)(2,"h2",2),s(3),n(),o(4,"form",3),d("ngSubmit",function(){return i.onSubmit()}),y(5,"input",4)(6,"input",5)(7,"input",6)(8,"input",7),o(9,"div",8)(10,"button",9),d("click",function(){return i.onClose()}),s(11," Cancel "),n(),o(12,"button",10),s(13," Add details "),n()()()()()),t&2&&(a(3),F(i.mode==="add"?"Add New User":"Edit User"),a(),p("formGroup",i.userForm),a(8),p("disabled",i.userForm.invalid))},dependencies:[R,j,N,V,O,B,G,v],encapsulation:2})}}return r})();var te=(r,x)=>x.id,re=r=>({itemsPerPage:5,currentPage:r});function ie(r,x){if(r&1){let e=U();o(0,"tr",7)(1,"th",10),s(2),n(),o(3,"td",11),s(4),n(),o(5,"td",11),s(6),n(),o(7,"td",11),s(8),n(),o(9,"td",12)(10,"button",13),d("click",function(i){let l=g(e).$implicit;return c().deleteUserById(l.id),_(i.stopPropagation())}),s(11," Delete User "),n(),o(12,"button",14),d("click",function(i){let l=g(e).$implicit;return c().openEditModal(l),_(i.stopPropagation())}),s(13," Edit User "),n()()()}if(r&2){let e=x.$implicit;k("routerLink",e.id),a(2),b(" ",e.name," "),a(2),b(" ",e.surname," "),a(2),b(" ",e.email," "),a(2),b(" ",e.profession," ")}}function oe(r,x){if(r&1){let e=U();o(0,"app-user-modal",15),d("formSubmit",function(i){g(e);let l=c();return _(l.handleFormSubmit(i))})("closeModal",function(){g(e);let i=c();return _(i.closeModal())}),n()}if(r&2){let e=c();p("mode",e.modalMode)("userData",e.selectedUser)}}var ee=(()=>{class r{constructor(e,t,i){this._userService=e,this._err=t,this._toastr=i,this.addForm=new A({}),this.users=[],this.loading=!1,this.currentPage=1,this.itemsPerPage=10,this.isModalOpen=!1,this.modalMode="add",this.selectedUser=null}ngOnInit(){this.loadUsers()}loadUsers(){this._userService.getAllUsers().subscribe({next:e=>{this.loading=!0,this.users=e},error:e=>{this._err.handleError(e),this.loading=!1}})}deleteUserById(e){this._userService.deleteUserById(e).subscribe({next:t=>{t&&this._toastr.success("User deleted successfully"),this.loadUsers()},error:t=>{this._err.handleError(t)}})}handlePageChange(e){this.currentPage=e}openUserModal(){this.modalMode="add",this.selectedUser=null,this.isModalOpen=!0}handleFormSubmit(e){this.modalMode==="add"?this._userService.addNewUser(e).subscribe({next:()=>{this._toastr.success("User added successfully!"),this.refreshUsers()},error:t=>{this._err.handleError(t)}}):this.modalMode==="edit"&&this.selectedUser&&this._userService.updateUserById(this.selectedUser.id,e).subscribe({next:()=>{this._toastr.success("User updated successfully!"),this.refreshUsers()},error:t=>{this._err.handleError(t)}}),this.isModalOpen=!1}closeModal(){this.isModalOpen=!1}refreshUsers(){this._userService.getAllUsers().subscribe(e=>{this.users=e})}openEditModal(e){this.modalMode="edit",this.selectedUser=e,this.isModalOpen=!0}static{this.\u0275fac=function(t){return new(t||r)(u(X),u(W),u(z))}}static{this.\u0275cmp=m({type:r,selectors:[["app-user-list"]],standalone:!0,features:[f],decls:22,vars:6,consts:[[1,"flex","flex-col","items-end","max-w-[1440px]","mx-auto","gap-10"],[1,"px-4","py-2","rounded-lg","bg-green-800","text-white","relative","top-5",3,"click"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-500","dark:text-gray-400","rounded-sm"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],[1,"text-lg","font-medium","text-red-50"],["scope","col",1,"px-6","py-3"],["scope","col",1,"px-6","py-3","text-center"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700","hover:cursor-pointer","hover:bg-black","ease-linear","transition-all",3,"routerLink"],[3,"pageChange"],[3,"mode","userData","formSubmit","closeModal",4,"ngIf"],["scope","row",1,"px-6","py-4","font-medium","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"px-6","py-4"],[1,"px-6","py-4","space-x-2","flex","justify-center","gap-2"],[1,"px-4","py-2","text-white","bg-red-500","rounded-lg","hover:bg-red-600","focus:outline-none","focus:ring-2","focus:ring-red-300","dark:bg-red-600","dark:hover:bg-red-700","dark:focus:ring-red-800",3,"click"],[1,"px-4","py-2","text-white","bg-blue-500","rounded-lg","hover:bg-blue-600","focus:outline-none","focus:ring-2","focus:ring-blue-300","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],[3,"formSubmit","closeModal","mode","userData"]],template:function(t,i){t&1&&(o(0,"div",0)(1,"button",1),d("click",function(){return i.openUserModal()}),s(2,"Add new user"),n(),o(3,"table",2)(4,"thead",3)(5,"tr",4)(6,"th",5),s(7," Name "),n(),o(8,"th",5),s(9," Surname "),n(),o(10,"th",5),s(11," Email Adress "),n(),o(12,"th",5),s(13," Profession "),n(),o(14,"th",6),s(15," Actions "),n()()(),o(16,"tbody"),w(17,ie,14,5,"tr",7,te),I(19,"paginate"),n()(),o(20,"pagination-controls",8),d("pageChange",function(C){return i.handlePageChange(C)}),n(),M(21,oe,1,2,"app-user-modal",9),n()),t&2&&(a(17),E(P(19,1,i.users,D(4,re,i.currentPage))),a(4),p("ngIf",i.isModalOpen))},dependencies:[$,Q,J,K,H,v,T,Z,L],encapsulation:2})}}return r})();var we=(()=>{class r{constructor(){}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275cmp=m({type:r,selectors:[["app-users"]],standalone:!0,features:[f],decls:1,vars:0,template:function(t,i){t&1&&y(0,"app-user-list")},dependencies:[ee],encapsulation:2})}}return r})();export{we as UsersComponent};
